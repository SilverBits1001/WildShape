<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wild Shape Extension</title>
  </head>
  <body>
    <div id="app">
      <!-- Navigation Tabs -->
      <div class="tabs">
        <div class="tab active" data-target="view-transform">Transform</div>
        <div class="tab" data-target="view-summons">Summons</div>
        <div class="tab" data-target="view-library">Library</div>
      </div>

      <!-- TRANSFORM VIEW -->
      <div id="view-transform" class="view">
        <!-- JS dynamically injects:
             1. Transform Options (Size dropdown, toggles)
             2. Active Wild Shapes list
        -->
        
        <div class="panel-header" style="margin-top:4px;">
          <span class="panel-title">Available Forms</span>
        </div>
        <div id="shape-container" class="shape-container">
          <p class="helper-text" style="text-align:center; font-style:italic;">Loading...</p>
        </div>
      </div>

      <!-- SUMMONS VIEW -->
      <div id="view-summons" class="view hidden">
        <!-- JS dynamically injects:
             1. Active Summons list (with Unsummon All)
        -->
        
        <div class="panel-header" style="margin-top:4px;">
          <span class="panel-title">Available Creatures</span>
        </div>
        <div id="summons-available-list" class="shape-container">
           <!-- Loaded via JS -->
        </div>
      </div>

      <!-- LIBRARY VIEW -->
      <div id="view-library" class="view hidden">
        
        <div class="card">
          <div class="panel-header">
            <span class="panel-title">Add to Library</span>
          </div>
          
          <!-- Helper text inserted here by JS -->

          <!-- Preview Area -->
          <div id="preview-area" style="display:none;">
            <img id="preview-img" src="" alt="Token Preview">
            <div class="small" style="margin-top:4px;">Selected Token</div>
          </div>

          <!-- Form -->
          <div class="input-group">
            <label class="input-label">Shape Name</label>
            <input type="text" id="input-name" placeholder="e.g. Giant Spider">
          </div>

          <div class="input-group">
            <label class="input-label">Size Multiplier (Reference)</label>
            <input type="number" id="input-size" placeholder="1" min="0.1" step="0.1">
          </div>

          <!-- Main Action Button -->
          <button id="btn-add-shape" class="primary" disabled>Select a Token</button>

          <!-- Batch Controls (Hidden by default) -->
          <div id="batch-controls" class="hidden">
            <button id="btn-skip">Skip</button>
            <button id="btn-cancel-batch" class="danger">Cancel Batch</button>
          </div>

          <!-- Batch Complete Overlay (Hidden by default) -->
          <div id="batch-complete" class="hidden">
             <div id="batch-complete-title">Batch complete</div>
             <div id="batch-complete-msg"></div>
             <div style="display:flex; gap:8px;">
               <button id="btn-batch-done" class="primary">Done</button>
               <button id="btn-batch-close">Close Extension</button>
             </div>
          </div>

        </div>

        <!-- Library List -->
        <div class="panel-header" style="margin-top:16px;">
          <span class="panel-title">Saved Shapes</span>
        </div>
        <div id="library-list" class="shape-container">
           <!-- Loaded via JS -->
        </div>
      </div>
    </div>
    
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
